<!-- Generated by assistant: guidance for AI coding agents to work in this repo -->
# Copilot / AI agent instructions for AddImagesFromFilesApp

This repository is a small WinForms (.NET 8) utility that loads image files from the `Images/` folder and inserts them as binary photos into a SQL Server `dbo.Categories` table. Use the guidance below to make targeted, low-risk changes and follow existing project conventions.

- Entry point: `Program.cs` — application initialization calls `ApplicationConfiguration.ConfigureServices()` and `SetupServices` to populate `DataConnections.Instance.MainConnection` from `appsettings.json`.
- UI: `MainForm.cs` and `MainForm.Designer.cs` — primary UI; `ExecuteButton_Click` orchestrates the main workflow: read images (via `CategoryHelper`), reset DB table and bulk-insert (via `CategoryRepository`).
- Image ingestion: `Classes/CategoryHelper.cs` — reads files from `Images/` and builds `List<Category>` (fields: `CategoryName`, `Description`, `Photo`, `FileName`). Only `.png`, `.jpg`, `.jpeg` are considered.
- Data access: `Classes/CategoryRepository.cs` — Dapper + `Microsoft.Data.SqlClient`; uses `DataConnections.Instance.MainConnection`. Methods to note: `ResetTable()`, `InsertManyAsync(...)`, `GetAllDataTableAsync()` (returns a DataTable for UI). Transaction handling is manual in `InsertManyAsync`.
- Configuration wiring: `Classes/Configuration/ApplicationConfiguration.cs` and `Classes/Configuration/SetupServices.cs` — use `IOptions<T>` to read `ConnectionStrings` and `EntityConfiguration` from `appsettings.json`. `DataConnections` and `EntitySettings` are singletons implemented via `Lazy<T>` in `Classes/Configuration`.

Actionable conventions and patterns (use these when editing or adding code):
- Prefer small, focused changes that update both implementation and any affected UI or SQL. For DB-affecting changes, update `CategoryRepository` methods and ensure `MainForm.ExecuteButton_Click` still receives a DataTable for display.
- Configuration pattern: add new strongly-typed settings to `Models/Configuration` and wire them in `ApplicationConfiguration.ConfigureServices()` using `services.Configure<T>(Config.Configuration.JsonRoot().GetSection(nameof(T)))`.
- Logging: `Program.Development()` configures Serilog to write to `<app base>/LogFiles/<yyyy-MM-dd>/Log.txt`. When adding logging, use `Serilog.Log` in the same style.
- Resource access: icons/images live in `Resources/` and `Properties/Resources.resx`. Use `Properties.Resources.<name>` where appropriate (see `Dialogs.cs`).

Files that define the shape of data and patterns to mirror:
- `Models/Category.cs` — category model (CategoryID, CategoryName, Description, Photo, FileName).
- `Classes/CategoryRepository.cs` — use of raw SQL literals with Dapper; prefer multi-line raw string literals (triple-quote) as used here.

Build / run / debug notes:
- This is a WinForms .NET 8 application. Build with `dotnet build` or open the solution in Visual Studio and run the project. The compiled exe and dependencies appear under `bin/Debug/net8.0-windows/`.
- appsettings.json drives the DB connection. Before running the UI, ensure `appsettings.json` contains a valid SQL Server connection string named under `ConnectionStrings:MainConnection`.
- The main workflow expects an `Images` folder (relative to the working directory or project root). Images must be PNG/JPG/JPEG.

Testing and safety:
- There are no unit tests in the repo. Make low-risk changes first (UI text, small refactors). For DB changes, prefer adding transactions and error logging; avoid destructive schema changes.

Examples to follow when making edits:
- To add a new configuration section `FooSettings`:
  - create `Models/Configuration/FooSettings.cs` with properties
  - in `ApplicationConfiguration.ConfigureServices()` add `services.Configure<FooSettings>(Config.Configuration.JsonRoot().GetSection(nameof(FooSettings)));`
  - inject `IOptions<FooSettings>` into `SetupServices` or the consumer.

- To add a new repository method that returns a DataTable (UI-friendly), follow the pattern in `GetAllDataTableAsync()` and hide numeric ID columns with `ColumnMapping = MappingType.Hidden`.

What not to change without human confirmation:
- Database schema assumptions (table `dbo.Categories` and its columns). Any change that modifies SQL, column names or types should be coordinated.
- `appsettings.json` structure and keys used by `ApplicationConfiguration` and `SetupServices`.

Quick references (files to open first):
- `Program.cs`, `MainForm.cs`, `Classes/CategoryHelper.cs`, `Classes/CategoryRepository.cs`, `Classes/Configuration/SetupServices.cs`, `appsettings.json`.

If anything here is unclear or you need runtime details (actual connection string, expected DB schema, or test data), ask a human — they can provide a local `appsettings.json` with working connection information or a SQL dump. After changes, run the app locally (Visual Studio or `dotnet run`) and verify the UI `Execute` path using a small `Images/` sample.

<!-- End of autogenerated instructions -->
